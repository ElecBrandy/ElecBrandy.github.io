<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>File descriptor | Elecbrandy</title>

      <link rel="stylesheet" href="/css/main.min.f8d3da8c3b211a3973954ef1e69034fb225c3bed12aa8055328469045b03d76a.css" integrity="sha256-&#43;NPajDshGjlzlU7x5pA0&#43;yJcO&#43;0SqoBVMoRpBFsD12o=" crossorigin="anonymous">
      <link rel="stylesheet" href="/css/min700.min.2bcf847d60d198d878bbf49b39374a02cdc7cd4e66411bfa42ada12fe8b580ba.css" integrity="sha256-K8&#43;EfWDRmNh4u/SbOTdKAs3HzU5mQRv6Qq2hL&#43;i1gLo=" crossorigin="anonymous">


      <script src="/js/main.0740a53bb4495dfc0d897c89f56fe801f29d1ad0d7e20f51491e421debb12f67.js" integrity="sha256-B0ClO7RJXfwNiXyJ9W/oAfKdGtDX4g9RSR5CHeuxL2c=" crossorigin="anonymous"></script>

<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha384-k6vP0kLaVwmS/tB1lCew8HlB/iMDmD4B9Vq3OU9bfXjMWmWrARyAZF9a3F7sKwDx" crossorigin="anonymous">



</head>
<body>
  <header>
    <header class="header-other">
	<div class="header-container">
		<div class="header-title">
			<a href="https://elecbrandy.github.io/">Elecbrandy</a>
	  	</div>
	  	<ul class="header-menu">
			<li><a href="https://elecbrandy.github.io//tags">TAGS</a></li>
			<li><a href="https://elecbrandy.github.io//about">ABOUT</a></li>
			<button id="theme-toggle" aria-label="Toggle theme">
				<img src="/dark.svg" alt="Dark mode" id="dark-icon">
				<img src="/light.svg" alt="Light mode" id="light-icon">
			  </button>
		</ul>
	</div>
	
		<div class="progress-bar"></div>
  	
</header>

  </header>
  
    
        <div class="pre-content" style="background-image: url('http://db.kookje.co.kr/news2000/photo/2017/0117/L20170117.99002154311i1.jpg');"></div>
        <div class="pre-title">
            
            
            <time datetime="2023-12-24T00:00:00&#43;00:00">December 24, 2023</time>
            <h1>File descriptor</h1>
        </div>
    


  <div class="content">
    
  <blockquote>
<p>운영 체제에서 파일이나 입출력 자원을 식별하기 위해 사용하는&hellip;</p>
</blockquote>
<br>
<p><code>Libft</code> 과제에 이어 <code>get_next_line</code> 과제를 진행하던 중 파일 디스크립터 개념을 만나게 되어 정리했다. 결국은 파일에게 접근하기 위한 번호이자 거창하게는 파일 포인터 개념으로 이해하고 넘어가자.</p>
<br>
<h1 id="file-descripot">File Descripot</h1>
<ul>
<li>리눅스 시스템에서는 모든 것이 파일
<ul>
<li>객체, 행동, 디바이스, 네트워크 연결, 디렉터리, 프로세스 등등</li>
</ul>
</li>
<li>이때 시스템이 이 파일들에게 접근 시 File Descriptor라는 개념을 이용함</li>
<li>File Descriptor는 Non-negative Integer 값을 가짐(0 ~ OPEN_MAX)</li>
<li>Process에서 열린 파일의 목록을 관리하는 테이블의 인덱스! (0, 1, 2는 기본 할당)</li>
<li>FD 테이블의 각 항목은 FD 플래그와 파일 테이블로의 포인터와 같음</li>
<li>이 포인터를 이용하여 FD 를 통해 시스템의 파일을 참조!</li>
<li>Process는 이런 FD 테이블과 파일 테이블의 정보를 직접 고칠 수 없으며, 반드시 커널을 통해서 수정을 해야함</li>
<li>프로그램에서 FD 참조시 index를 사용할 수도 있고, POSIX 명을 사용할 수도 있음</li>
</ul>
<br>
<h1 id="fd와-열려-있는-파일의-관계">FD와 열려 있는 파일의 관계</h1>
<ul>
<li>각 프로세스별로 커널은 <code>open file descriptor table</code> 을 가짐</li>
<li>테이블의 각 엔트리는 하나의 FD에 대한 동작 제어 플래그, 열린 파일을 가리키는 참조를 담고 있음</li>
<li>특히 <code>open file descriptor table</code> 현재 파일의 Offset, flag, 접근 모드 ,i/o 관련 설정, 파일의 i-node 객체를 가리키는 정보를 담고 있음</li>
<li>같은 <code>open file descripton</code> 을 가르키는 2개의 FD가 Offset 값을 공유함
<ul>
<li>간단한 예시
<ol>
<li><code>file.txt</code> 열고 두 개의 파일 디스크립터를 얻는다.</li>
<li>FD1을 이용해서 파일 처음으로 이동한다. (offset 0)</li>
<li>FD2을 이용해서 파일 어딘가로 이동한다. (offset 100)</li>
<li>FD1과 FD2는 동일한 파일 <code>file.txt</code>를 가리키지만 FD1은 파일의 처음 / FD2는 파일의 어딘가를  가리킨다.</li>
<li>이렇게 동시에 한 파일을 여러 위치에서 읽고 쓸 수 있다.</li>
</ol>
</li>
</ul>
</li>
</ul>
<br>
<h1 id="정리">정리</h1>
<ol>
<li><code>file.txt</code> 를 열면 OS는 <code>open file descriptor table</code>에 해당 항목을 추가한다.</li>
<li>이때 인덱스는 <code>file.txt</code> 를 가르킨다.</li>
<li><code>file.txt</code> 를 닫으면 테이블에서 해당 인덱스가 사라진다.</li>
</ol>
<br>
<h1 id="reference">Reference</h1>
<ul>
<li><a href="https://www.youtube.com/watch?v=EqndHT606Tw">https://www.youtube.com/watch?v=EqndHT606Tw</a></li>
<li><a href="https://www.youtube.com/watch?v=btT4HDKNIOw">https://www.youtube.com/watch?v=btT4HDKNIOw</a></li>
<li><a href="https://dev-ahn.tistory.com/96">https://dev-ahn.tistory.com/96</a></li>
</ul>
<br>
<div class="alert">
    <span><a href="https://elecbrandy.github.io/tags/CS101"> CS101 </a></span>
</div>

<br>


  </div>
  <footer>
    

<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
<script>addBackToTop({
  diameter: 40,
  backgroundColor: 'rgb(255, 83, 176)',
  textColor: '#fff'
})</script>

  </footer>
</body>
</html>
